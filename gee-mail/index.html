<!DOCTYPE html>
<html lang="en">
	<head>
		<meta charset="UTF-8">
		<link href="css/style.css" rel="stylesheet" media="screen">

    <script>
      window.onload = function(){
      	window.geemails.map(function(currentValue, index){
      		var msg = $(
      			`<div class='message'>
	      			<div id="date">${currentValue.date}</div>
	      			<div id="sender">${currentValue.sender}</div>
	      			<div id="subject">${currentValue.subject}</div>
	      			<div id="body" class="hidden">${currentValue.body}</div>
      			</div>
						<br>`);
      		$('.mail').append(msg);
      	});

      	$( ".message" ).click(function() {
					console.log($( ".message" ))
					this.lastElementChild.className === "hidden" ? this.lastElementChild.className = "visible" : this.lastElementChild.className = "hidden";
				});
				$("#inboxCount")[0].innerText = $(".message").length;

				setInterval(() => {
					$('.newMail').append(
						`<div class='message'>
	      			<div id="date">${window.getNewMessage.date}</div>
	      			<div id="sender">${window.getNewMessage.sender}</div>
	      			<div id="subject">${window.getNewMessage.subject}</div>
	      			<div id="body" class="hidden">${window.getNewMessage.body}</div>
      			</div>
						<br>`);
				}, 2000);

      };
    </script>
	</head>
	<body>
		<div class="container" id="main">
			<h1>
				GEE-MAIL
			</h1>

			<div class = "mail">
				<div class = "mailHead">
					INBOX <span id="inboxCount"></span>
				</div>
			</div>

			<div class = "newMail">
				NEW
			</div>
		</div>
	</body>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
	<script src="js/mail-generator.js"></script>
	<script src="js/app.js"></script>
</html>
